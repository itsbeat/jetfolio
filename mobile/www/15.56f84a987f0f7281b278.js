(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"1OKt":function(n,t,l){"use strict";l.r(t);var e=l("CcnG"),i=l("BZV/"),o=function(){function n(n,t,l){this.router=n,this.activatedRoute=t,this.sessionsService=l,this.canProceed=!1,this.router=n,this.activatedRoute=t,this.sessionsService=l}return n.prototype.ngOnInit=function(){var n=this;this.sessionId=this.activatedRoute.snapshot.paramMap.get("session_id"),this.planId=this.activatedRoute.snapshot.paramMap.get("plan_id"),this.sessionId&&this.planId&&this.sessionsService.getSessionById(this.planId,this.sessionId).then(function(t){n.session=t})},n.prototype.tickAction=function(n,t){this.session.actions[t].result=n?1:0;var l=!0;this.session.actions.forEach(function(n){l=l&&null!=n.result}),this.canProceed=l},n.prototype.saveReport=function(){var n=this;this.session.report=!0,this.session.report_date=new Date,this.session.report_note=this.note,this.sessionsService.saveSession(this.session).then(function(t){n.router.navigate(["/session-details/"+n.planId+"/"+n.sessionId])},function(n){})},n}(),u=function(){return function(){}}(),s=l("pMnS"),r=l("oBZk"),c=l("ZZ/e"),a=l("Ip0R"),p=l("gIcY"),h=l("ZYCi"),b=e.ob({encapsulation:0,styles:[[""]],data:{}});function d(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,12,"div",[["class","box selected flex-cont-row v-center mb-2"]],[[2,"tertiary",null],[2,"ok",null],[2,"no",null]],null,null,null,null)),(n()(),e.qb(1,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e.Ib(2,null,[" Azione "," "])),(n()(),e.qb(3,0,null,null,2,"p",[["class","flex-1 tx-center tx-lightgrey"]],null,null,null,null,null)),(n()(),e.Ib(4,null,[" "," "])),e.Eb(5,1),(n()(),e.qb(6,0,null,null,6,"div",[["class","flex-cont-row"]],null,null,null,null,null)),(n()(),e.qb(7,0,null,null,2,"div",[["class","ball-icon"]],[[2,"tx-white",null],[2,"bg-secondary",null],[2,"tx-secondary",null],[2,"bg-white",null],[2,"border",null]],[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.tickAction(!0,n.context.index)&&e),e},null,null)),(n()(),e.qb(8,0,null,null,1,"ion-icon",[["name","checkmark"]],null,null,null,r.G,r.l)),e.pb(9,49152,null,0,c.B,[e.h,e.k,e.z],{name:[0,"name"]},null),(n()(),e.qb(10,0,null,null,2,"div",[["class","ball-icon tx-red bg-white ml-2"]],[[2,"tx-white",null],[2,"bg-red",null],[2,"tx-red",null],[2,"bg-white",null],[2,"border",null]],[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.tickAction(!1,n.context.index)&&e),e},null,null)),(n()(),e.qb(11,0,null,null,1,"ion-icon",[["name","close"]],null,null,null,r.G,r.l)),e.pb(12,49152,null,0,c.B,[e.h,e.k,e.z],{name:[0,"name"]},null)],function(n,t){n(t,9,0,"checkmark"),n(t,12,0,"close")},function(n,t){n(t,0,0,null==t.context.$implicit.result,1==t.context.$implicit.result,0==t.context.$implicit.result),n(t,2,0,t.context.index+1);var l=e.Jb(t,4,0,n(t,5,0,e.Ab(t.parent.parent,0),t.context.$implicit.deadline));n(t,4,0,l),n(t,7,0,1==t.context.$implicit.result,1==t.context.$implicit.result,null==t.context.$implicit.result||1!=t.context.$implicit.result,null==t.context.$implicit.result||1!=t.context.$implicit.result,null==t.context.$implicit.result||1!=t.context.$implicit.result),n(t,10,0,0==t.context.$implicit.result,0==t.context.$implicit.result,null==t.context.$implicit.result||0!=t.context.$implicit.result,null==t.context.$implicit.result||0!=t.context.$implicit.result,null==t.context.$implicit.result||0!=t.context.$implicit.result)})}function f(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,2,"div",[["class","action-plan-cont"]],null,null,null,null,null)),(n()(),e.hb(16777216,null,null,1,null,d)),e.pb(2,278528,null,0,a.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(n,t){n(t,2,0,t.component.session.actions)},null)}function g(n){return e.Kb(0,[e.Cb(0,a.d,[e.u]),(n()(),e.qb(1,0,null,null,11,"ion-header",[["no-border",""]],null,null,null,r.F,r.k)),e.pb(2,49152,null,0,c.A,[e.h,e.k,e.z],null,null),(n()(),e.qb(3,0,null,0,9,"ion-toolbar",[["class","elan-toolbar"]],null,null,null,r.P,r.u)),e.pb(4,49152,null,0,c.Ab,[e.h,e.k,e.z],null,null),(n()(),e.qb(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,r.y,r.d)),e.pb(6,49152,null,0,c.k,[e.h,e.k,e.z],null,null),(n()(),e.qb(7,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(n,t,l){var i=!0;return"click"===t&&(i=!1!==e.Ab(n,9).onClick(l)&&i),i},r.w,r.b)),e.pb(8,49152,null,0,c.f,[e.h,e.k,e.z],null,null),e.pb(9,16384,null,0,c.g,[[2,c.gb],c.Gb],null,null),(n()(),e.qb(10,0,null,0,2,"ion-title",[["class","tx-bold"]],null,null,null,r.O,r.t)),e.pb(11,49152,null,0,c.yb,[e.h,e.k,e.z],null,null),(n()(),e.Ib(-1,0,[" Genera Report Sessione "])),(n()(),e.qb(13,0,null,null,19,"ion-content",[["scroll-y","false"]],null,null,null,r.E,r.j)),e.pb(14,49152,null,0,c.t,[e.h,e.k,e.z],null,null),(n()(),e.qb(15,0,null,0,17,"div",[["class","p-5 flex-cont-col h-100"]],null,null,null,null,null)),(n()(),e.qb(16,0,null,null,13,"div",[["class","flex-1 flex-cont-col mb-3 scroll"]],null,null,null,null,null)),(n()(),e.qb(17,0,null,null,1,"h3",[["class","mb-3 tx-bold tx-tertiary"]],null,null,null,null,null)),(n()(),e.Ib(-1,null,[" Lista Azioni "])),(n()(),e.hb(16777216,null,null,1,null,f)),e.pb(20,16384,null,0,a.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(n()(),e.qb(21,0,null,null,1,"h3",[["class","mb-2 mt-3 tx-bold tx-tertiary"]],null,null,null,null,null)),(n()(),e.Ib(-1,null,[" Note "])),(n()(),e.qb(23,0,null,null,6,"ion-textarea",[["class","flex-1"],["placeholder","Inserisci una nota relativamente all'Action Plan di questa sessione"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,t,l){var i=!0,o=n.component;return"ionBlur"===t&&(i=!1!==e.Ab(n,24)._handleBlurEvent()&&i),"ionChange"===t&&(i=!1!==e.Ab(n,24)._handleInputEvent(l.target.value)&&i),"ngModelChange"===t&&(i=!1!==(o.note=l)&&i),i},r.N,r.s)),e.pb(24,16384,null,0,c.Kb,[e.k],null,null),e.Fb(1024,null,p.e,function(n){return[n]},[c.Kb]),e.pb(26,671744,null,0,p.j,[[8,null],[8,null],[8,null],[6,p.e]],{model:[0,"model"]},{update:"ngModelChange"}),e.Fb(2048,null,p.f,null,[p.j]),e.pb(28,16384,null,0,p.g,[[4,p.f]],null,null),e.pb(29,49152,null,0,c.wb,[e.h,e.k,e.z],{placeholder:[0,"placeholder"]},null),(n()(),e.qb(30,0,null,null,2,"ion-button",[["class","choose-coach-button not-fixed"],["color","primary"],["fill","solid"]],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.saveReport()&&e),e},r.x,r.c)),e.pb(31,49152,null,0,c.j,[e.h,e.k,e.z],{color:[0,"color"],disabled:[1,"disabled"],fill:[2,"fill"]},null),(n()(),e.Ib(-1,0,[" Salva "]))],function(n,t){var l=t.component;n(t,20,0,l.session),n(t,26,0,l.note),n(t,29,0,"Inserisci una nota relativamente all'Action Plan di questa sessione"),n(t,31,0,"primary",!l.canProceed,"solid")},function(n,t){n(t,23,0,e.Ab(t,28).ngClassUntouched,e.Ab(t,28).ngClassTouched,e.Ab(t,28).ngClassPristine,e.Ab(t,28).ngClassDirty,e.Ab(t,28).ngClassValid,e.Ab(t,28).ngClassInvalid,e.Ab(t,28).ngClassPending)})}function v(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,1,"app-generate-report",[],null,null,null,g,b)),e.pb(1,114688,null,0,o,[h.m,h.a,i.a],null,null)],function(n,t){n(t,1,0)},null)}var y=e.mb("app-generate-report",o,v,{},{},[]);l.d(t,"GenerateReportPageModuleNgFactory",function(){return m});var m=e.nb(u,[],function(n){return e.xb([e.yb(512,e.j,e.bb,[[8,[s.a,y]],[3,e.j],e.x]),e.yb(4608,a.n,a.m,[e.u,[2,a.C]]),e.yb(4608,p.n,p.n,[]),e.yb(4608,c.b,c.b,[e.z,e.g]),e.yb(4608,c.Fb,c.Fb,[c.b,e.j,e.q]),e.yb(4608,c.Ib,c.Ib,[c.b,e.j,e.q]),e.yb(1073742336,a.b,a.b,[]),e.yb(1073742336,p.l,p.l,[]),e.yb(1073742336,p.c,p.c,[]),e.yb(1073742336,c.Cb,c.Cb,[]),e.yb(1073742336,h.o,h.o,[[2,h.u],[2,h.m]]),e.yb(1073742336,u,u,[]),e.yb(1024,h.k,function(){return[[{path:"",component:o}]]},[])])})},Aso2:function(n,t,l){"use strict";l.d(t,"a",function(){return b});var e=l("t/Na"),i=l("J563"),o=l("GxC+"),u=l("AytR"),s=l("CcnG"),r=l("ZYCi"),c=u.a.API_URL+"/resource",a=c+"/act",p={1:8,2:10,3:14,4:16};function h(n){var t=new Date(n.date),l=t.getTime();l+=60*p[n.hour]*60*1e3;var e=-1*t.getTimezoneOffset()*6e4;return new Date(l+e)}var b=function(){function n(n,t,l,e){this.http=n,this.authService=t,this.surveyService=l,this.router=e,this.userPlans=null,this.creatingNewPath=!1,this.newPath={coach:{},dates:[],survey:{}}}return n.prototype.getCoachingPaths=function(){var n=this;return new Promise(function(t,l){var i={user_id:n.authService.getLoggedUser().id},o=(new e.g).set("filter",JSON.stringify(i));n.http.get(c+"/coachingplans",{params:o}).subscribe(function(l){n.userPlans=l.resources.resources,t(n.userPlans)},function(n){l(n)})})},n.prototype.getPlanDetails=function(n){var t=this;return new Promise(function(l,e){t.http.get(c+"/coachingplans/"+n).subscribe(function(n){l(n.resource)},function(n){t.router.navigate(["/coaching-paths",{}]),e(n)})})},n.prototype.getCreatingNewPath=function(){return this.creatingNewPath},n.prototype.getNewPath=function(){return this.newPath},n.prototype.getCurrentCoach=function(){return this.newPath.coach},n.prototype.saveNewPath=function(){var n=this;return new Promise(function(t,l){var e=n.authService.getLoggedUser(),i=n.surveyService.getSurvey(),o={coach:{id:n.newPath.coach.id},user:{id:e.id},survey:{id:i.id},sessions:[{proposed_date_1:h(n.newPath.dates[0]),proposed_date_2:h(n.newPath.dates[1]),proposed_date_3:h(n.newPath.dates[2])}]};n.http.post(c+"/coachingplans",{resource:o}).subscribe(function(n){t(n)},function(n){l(n)})})},n.prototype.createNewSession=function(n){var t=this;return void 0===n&&(n=!0),new Promise(function(l,e){var i={proposed_date_1:h(t.newPath.dates[0]),proposed_date_2:h(t.newPath.dates[1]),proposed_date_3:h(t.newPath.dates[2])};n||(i.id=t.sessionId),t.planId&&(i.coaching_plan={id:t.planId}),t.http.post(c+"/sessions",{resource:i}).subscribe(function(n){l(t.planId)},function(n){l(n)})})},n.prototype.savePlanSessions=function(){return this.sessionId?this.createNewSession(!1):this.creatingNewPath?this.saveNewPath():this.createNewSession()},n.prototype.closePlan=function(n){var t=this;return new Promise(function(l,e){t.http.post(a+"/coachingplans/"+n.id+"/close_coaching_plan",{}).subscribe(function(n){l(n)},function(n){e(n)})})},n.prototype.setPlanId=function(n){this.planId=n},n.prototype.setSessionId=function(n){this.sessionId=n},n.prototype.setNewPath=function(n){this.newPath=JSON.parse(JSON.stringify(n))},n.prototype.setCoach=function(n){this.newPath.coach=JSON.parse(JSON.stringify(n))},n.prototype.setDates=function(n){this.newPath.dates=JSON.parse(JSON.stringify(n))},n.prototype.setCreatingNewPath=function(n){this.creatingNewPath=n},n.prototype.saveTeachingAgreement=function(n,t){var l=this;return new Promise(function(e,i){var o=t;o.id=n,l.http.post(c+"/coachingplans",{resource:o}).subscribe(function(n){e("ok")},function(n){i(n)})})},n.ngInjectableDef=s.S({factory:function(){return new n(s.W(e.c),s.W(i.a),s.W(o.a),s.W(r.m))},token:n,providedIn:"root"}),n}()},"BZV/":function(n,t,l){"use strict";l.d(t,"a",function(){return c});var e=l("Aso2"),i=l("AytR"),o=l("CcnG"),u=l("t/Na"),s=l("ZYCi"),r=i.a.API_URL+"/resource",c=function(){function n(n,t,l){this.profileService=n,this.http=t,this.router=l}return n.prototype.getSessionById=function(n,t){var l=this;return new Promise(function(e,i){l.profileService.getPlanDetails(n).then(function(n){var l;n.sessions.map(function(n,e){n.id==t&&(n.index=e+1,l=n)}),l.sessions_number=n.sessions_number,e(l)},function(n){l.router.navigate(["/coaching-paths",{}]),i(n)})})},n.prototype.getSessionActionPlanById=function(n){return this.sessions[n].action_plan},n.prototype.saveAction=function(n,t){var l=this;return new Promise(function(e,i){var o,u,s;t.session={id:n},t.deadline=(u=(o=t.deadline).getTime(),s=-1*o.getTimezoneOffset()*6e4,new Date(u+s)),console.log(t),l.http.post(r+"/actions",{resource:t}).subscribe(function(n){console.log(n),e(n)},function(n){i(n)})})},n.prototype.saveSession=function(n){var t=this;return new Promise(function(l,e){t.http.post(r+"/sessions",{resource:n}).subscribe(function(n){l(n)},function(n){e(n)})})},n.ngInjectableDef=o.S({factory:function(){return new n(o.W(e.a),o.W(u.c),o.W(s.m))},token:n,providedIn:"root"}),n}()},"GxC+":function(n,t,l){"use strict";l.d(t,"a",function(){return s});var e=l("t/Na"),i=l("AytR"),o=l("CcnG"),u=i.a.API_URL+"/resource",s=function(){function n(n){this.http=n,this.answers=[]}return n.prototype.save=function(n){var t=this;return new Promise(function(l,e){t.http.post(u+"/surveys",{resource:{answers:n}}).subscribe(function(n){t.surveyResult=n.resource,l("ok")},function(n){e(n.statusText)})})},n.prototype.getSurvey=function(){return this.surveyResult},n.prototype.getQuestions=function(){var n=this;return new Promise(function(t,l){var i=(new e.g).set("filter",JSON.stringify({visible:1}));n.http.get(u+"/questions",{params:i}).subscribe(function(n){t(n.resources.resources)},function(n){l(n.statusText)})})},n.prototype.getAnswers=function(){return this.answers},n.ngInjectableDef=o.S({factory:function(){return new n(o.W(e.c))},token:n,providedIn:"root"}),n}()}}]);