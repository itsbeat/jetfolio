(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Aso2:function(n,l,t){"use strict";t.d(l,"a",function(){return b});var e=t("t/Na"),u=t("J563"),o=t("GxC+"),i=t("AytR"),s=t("CcnG"),r=t("ZYCi"),c=i.a.API_URL+"/resource",a=c+"/act",p={1:8,2:10,3:14,4:16};function h(n){var l=new Date(n.date),t=l.getTime();t+=60*p[n.hour]*60*1e3;var e=-1*l.getTimezoneOffset()*6e4;return new Date(t+e)}var b=function(){function n(n,l,t,e){this.http=n,this.authService=l,this.surveyService=t,this.router=e,this.userPlans=null,this.creatingNewPath=!1,this.newPath={coach:{},dates:[],survey:{}}}return n.prototype.getCoachingPaths=function(){var n=this;return new Promise(function(l,t){var u={user_id:n.authService.getLoggedUser().id},o=(new e.g).set("filter",JSON.stringify(u));n.http.get(c+"/coachingplans",{params:o}).subscribe(function(t){n.userPlans=t.resources.resources,l(n.userPlans)},function(n){t(n)})})},n.prototype.getPlanDetails=function(n){var l=this;return new Promise(function(t,e){l.http.get(c+"/coachingplans/"+n).subscribe(function(n){t(n.resource)},function(n){l.router.navigate(["/coaching-paths",{}]),e(n)})})},n.prototype.getCreatingNewPath=function(){return this.creatingNewPath},n.prototype.getNewPath=function(){return this.newPath},n.prototype.getCurrentCoach=function(){return this.newPath.coach},n.prototype.saveNewPath=function(){var n=this;return new Promise(function(l,t){var e=n.authService.getLoggedUser(),u=n.surveyService.getSurvey(),o={coach:{id:n.newPath.coach.id},user:{id:e.id},survey:{id:u.id},sessions:[{proposed_date_1:h(n.newPath.dates[0]),proposed_date_2:h(n.newPath.dates[1]),proposed_date_3:h(n.newPath.dates[2])}]};n.http.post(c+"/coachingplans",{resource:o}).subscribe(function(n){l(n)},function(n){t(n)})})},n.prototype.createNewSession=function(n){var l=this;return void 0===n&&(n=!0),new Promise(function(t,e){var u={proposed_date_1:h(l.newPath.dates[0]),proposed_date_2:h(l.newPath.dates[1]),proposed_date_3:h(l.newPath.dates[2])};n||(u.id=l.sessionId),l.planId&&(u.coaching_plan={id:l.planId}),l.http.post(c+"/sessions",{resource:u}).subscribe(function(n){t(l.planId)},function(n){t(n)})})},n.prototype.savePlanSessions=function(){return this.sessionId?this.createNewSession(!1):this.creatingNewPath?this.saveNewPath():this.createNewSession()},n.prototype.closePlan=function(n){var l=this;return new Promise(function(t,e){l.http.post(a+"/coachingplans/"+n.id+"/close_coaching_plan",{}).subscribe(function(n){t(n)},function(n){e(n)})})},n.prototype.setPlanId=function(n){this.planId=n},n.prototype.setSessionId=function(n){this.sessionId=n},n.prototype.setNewPath=function(n){this.newPath=JSON.parse(JSON.stringify(n))},n.prototype.setCoach=function(n){this.newPath.coach=JSON.parse(JSON.stringify(n))},n.prototype.setDates=function(n){this.newPath.dates=JSON.parse(JSON.stringify(n))},n.prototype.setCreatingNewPath=function(n){this.creatingNewPath=n},n.prototype.saveTeachingAgreement=function(n,l){var t=this;return new Promise(function(e,u){var o=l;o.id=n,t.http.post(c+"/coachingplans",{resource:o}).subscribe(function(n){e("ok")},function(n){u(n)})})},n.ngInjectableDef=s.S({factory:function(){return new n(s.W(e.c),s.W(u.a),s.W(o.a),s.W(r.m))},token:n,providedIn:"root"}),n}()},"GxC+":function(n,l,t){"use strict";t.d(l,"a",function(){return s});var e=t("t/Na"),u=t("AytR"),o=t("CcnG"),i=u.a.API_URL+"/resource",s=function(){function n(n){this.http=n,this.answers=[]}return n.prototype.save=function(n){var l=this;return new Promise(function(t,e){l.http.post(i+"/surveys",{resource:{answers:n}}).subscribe(function(n){l.surveyResult=n.resource,t("ok")},function(n){e(n.statusText)})})},n.prototype.getSurvey=function(){return this.surveyResult},n.prototype.getQuestions=function(){var n=this;return new Promise(function(l,t){var u=(new e.g).set("filter",JSON.stringify({visible:1}));n.http.get(i+"/questions",{params:u}).subscribe(function(n){l(n.resources.resources)},function(n){t(n.statusText)})})},n.prototype.getAnswers=function(){return this.answers},n.ngInjectableDef=o.S({factory:function(){return new n(o.W(e.c))},token:n,providedIn:"root"}),n}()},zPuh:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=t("Aso2"),o=function(){function n(n,l,t,e){this.router=n,this.zone=l,this.changeDetector=t,this.profileService=e,this.plans=[],this.isLoading=!0,this.canProceed=!0,this.router=n}return n.prototype.ngOnInit=function(){this.loadPlans()},n.prototype.ionViewWillEnter=function(){this.loadPlans()},n.prototype.loadPlans=function(){var n=this;this.isLoading=!0,this.profileService.getCoachingPaths().then(function(l){n.plans=JSON.parse(JSON.stringify(l)),n.updateCanProceed(),n.isLoading=!1,n.changeDetector.detectChanges()},function(l){n.plans=[],n.isLoading=!1})},n.prototype.updateCanProceed=function(){this.canProceed=!this.plans.some(function(n){return"idle"==n.status.code||"active"==n.status.code})},n.prototype.addPlan=function(){this.canProceed&&this.router.navigateByUrl("/start-path")},n.prototype.showPlanDetails=function(n){this.router.navigateByUrl("profile/"+n)},n.prototype.goToProfile=function(){this.router.navigateByUrl("userprofile")},n}(),i=function(){return function(){}}(),s=t("pMnS"),r=t("oBZk"),c=t("ZZ/e"),a=t("Ip0R"),p=t("ZYCi"),h=e.ob({encapsulation:0,styles:[[""]],data:{}});function b(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,1,"p",[["class","m-auto"]],null,null,null,null,null)),(n()(),e.Ib(-1,null,[" Non ci sono piani di coaching "]))],null,null)}function f(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,3,"div",[["class","status-badge tx-center mg-t-5 mr-auto"]],[[2,"active",null],[2,"idle",null],[2,"ok",null]],null,null,null,null)),(n()(),e.qb(1,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),e.Ib(2,null,["",""])),e.Eb(3,1)],null,function(n,l){n(l,0,0,"active"==l.parent.context.$implicit.status.code,"idle"==l.parent.context.$implicit.status.code,"done"==l.parent.context.$implicit.status.code);var t=e.Jb(l,2,0,n(l,3,0,e.Ab(l.parent.parent.parent,0),l.parent.context.$implicit.status.name));n(l,2,0,t)})}function d(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,1,"ion-icon",[["name","checkmark"]],null,null,null,r.G,r.l)),e.pb(1,49152,null,0,c.B,[e.h,e.k,e.z],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"checkmark")},null)}function g(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,1,"ion-icon",[["class","size-m"],["src","assets/icon/svg/arrow_forward.svg"]],null,null,null,r.G,r.l)),e.pb(1,49152,null,0,c.B,[e.h,e.k,e.z],{src:[0,"src"]},null)],function(n,l){n(l,1,0,"assets/icon/svg/arrow_forward.svg")},null)}function v(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,14,"div",[["class","box w-100 my-2 flex-cont-row v-center selected"]],[[2,"active",null],[2,"idle",null],[2,"ok",null]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.showPlanDetails(n.context.$implicit.id)&&e),e},null,null)),(n()(),e.qb(1,0,null,null,4,"div",[["class","flex-cont-col v-center flex-1"]],null,null,null,null,null)),(n()(),e.qb(2,0,null,null,1,"p",[["class","m-0 tx-tertiary"]],null,null,null,null,null)),(n()(),e.Ib(3,null,[" Piano #"," "])),(n()(),e.hb(16777216,null,null,1,null,f)),e.pb(5,16384,null,0,a.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(n()(),e.qb(6,0,null,null,8,"div",[["class","flex-cont-row"]],null,null,null,null,null)),(n()(),e.qb(7,0,null,null,7,"div",[["class","ball-icon tx-tertiary"]],null,null,null,null,null)),e.pb(8,278528,null,0,a.j,[e.s,e.t,e.k,e.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Db(9,{"tx-white bg-secondary":0,border:1}),e.pb(10,16384,null,0,a.p,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),e.hb(16777216,null,null,1,null,d)),e.pb(12,278528,null,0,a.q,[e.O,e.L,a.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),e.hb(16777216,null,null,1,null,g)),e.pb(14,16384,null,0,a.r,[e.O,e.L,a.p],null,null)],function(n,l){n(l,5,0,"done"!=l.context.$implicit.status.code);var t=n(l,9,0,"done"===l.context.$implicit.status.code,"done"!==l.context.$implicit.status.code);n(l,8,0,"ball-icon tx-tertiary",t),n(l,10,0,l.context.$implicit.status.code),n(l,12,0,"done")},function(n,l){n(l,0,0,"active"==l.context.$implicit.status.code,"idle"==l.context.$implicit.status.code,"done"==l.context.$implicit.status.code),n(l,3,0,l.context.index+1)})}function y(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,9,"div",[["class","p-5 h-100 w-100 flex-cont-col"]],null,null,null,null,null)),(n()(),e.qb(1,0,null,null,4,"div",[["class","flex-1 h-center flex-cont-col scroll"]],null,null,null,null,null)),(n()(),e.hb(16777216,null,null,1,null,b)),e.pb(3,16384,null,0,a.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(n()(),e.hb(16777216,null,null,1,null,v)),e.pb(5,278528,null,0,a.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(n()(),e.qb(6,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),e.qb(7,0,null,null,2,"ion-button",[["class","choose-coach-button"],["color","primary"],["fill","solid"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.addPlan()&&e),e},r.x,r.c)),e.pb(8,49152,null,0,c.j,[e.h,e.k,e.z],{color:[0,"color"],disabled:[1,"disabled"],fill:[2,"fill"]},null),(n()(),e.Ib(-1,0,[" Aggiungi Piano "]))],function(n,l){var t=l.component;n(l,3,0,0==t.plans.length),n(l,5,0,t.plans),n(l,8,0,"primary",!t.canProceed,"solid")},null)}function w(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,5,"div",[["class","flex-cont-col v-center h-center h-100"]],null,null,null,null,null)),(n()(),e.qb(1,0,null,null,4,"div",[["class","flex-cont-col v-center h-center"]],null,null,null,null,null)),(n()(),e.qb(2,0,null,null,1,"ion-spinner",[],null,null,null,r.M,r.r)),e.pb(3,49152,null,0,c.qb,[e.h,e.k,e.z],null,null),(n()(),e.qb(4,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Ib(-1,null,["Caricamento..."]))],null,null)}function P(n){return e.Kb(0,[e.Cb(0,a.w,[]),(n()(),e.qb(1,0,null,null,12,"ion-header",[["no-border",""]],null,null,null,r.F,r.k)),e.pb(2,49152,null,0,c.A,[e.h,e.k,e.z],null,null),(n()(),e.qb(3,0,null,0,10,"ion-toolbar",[["class","elan-toolbar"]],null,null,null,r.P,r.u)),e.pb(4,49152,null,0,c.Ab,[e.h,e.k,e.z],null,null),(n()(),e.qb(5,0,null,0,5,"ion-buttons",[["slot","primary"]],null,null,null,r.y,r.d)),e.pb(6,49152,null,0,c.k,[e.h,e.k,e.z],null,null),(n()(),e.qb(7,0,null,0,3,"ion-button",[],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.goToProfile()&&e),e},r.x,r.c)),e.pb(8,49152,null,0,c.j,[e.h,e.k,e.z],null,null),(n()(),e.qb(9,0,null,0,1,"ion-icon",[["name","contact"],["slot","start"]],null,null,null,r.G,r.l)),e.pb(10,49152,null,0,c.B,[e.h,e.k,e.z],{name:[0,"name"]},null),(n()(),e.qb(11,0,null,0,2,"ion-title",[],null,null,null,r.O,r.t)),e.pb(12,49152,null,0,c.yb,[e.h,e.k,e.z],null,null),(n()(),e.Ib(-1,0,["Percorsi di Coaching"])),(n()(),e.qb(14,0,null,null,5,"ion-content",[],null,null,null,r.E,r.j)),e.pb(15,49152,null,0,c.t,[e.h,e.k,e.z],null,null),(n()(),e.hb(16777216,null,0,1,null,y)),e.pb(17,16384,null,0,a.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(n()(),e.hb(16777216,null,0,1,null,w)),e.pb(19,16384,null,0,a.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,10,0,"contact"),n(l,17,0,!t.isLoading),n(l,19,0,t.isLoading)},null)}function m(n){return e.Kb(0,[(n()(),e.qb(0,0,null,null,1,"app-coaching-paths",[],null,null,null,P,h)),e.pb(1,114688,null,0,o,[p.m,e.z,e.h,u.a],null,null)],function(n,l){n(l,1,0)},null)}var k=e.mb("app-coaching-paths",o,m,{},{},[]),x=t("gIcY");t.d(l,"CoachingPathsPageModuleNgFactory",function(){return I});var I=e.nb(i,[],function(n){return e.xb([e.yb(512,e.j,e.bb,[[8,[s.a,k]],[3,e.j],e.x]),e.yb(4608,a.n,a.m,[e.u,[2,a.C]]),e.yb(4608,x.n,x.n,[]),e.yb(4608,c.b,c.b,[e.z,e.g]),e.yb(4608,c.Fb,c.Fb,[c.b,e.j,e.q]),e.yb(4608,c.Ib,c.Ib,[c.b,e.j,e.q]),e.yb(1073742336,a.b,a.b,[]),e.yb(1073742336,x.l,x.l,[]),e.yb(1073742336,x.c,x.c,[]),e.yb(1073742336,c.Cb,c.Cb,[]),e.yb(1073742336,p.o,p.o,[[2,p.u],[2,p.m]]),e.yb(1073742336,i,i,[]),e.yb(1024,p.k,function(){return[[{path:"",component:o}]]},[])])})}}]);