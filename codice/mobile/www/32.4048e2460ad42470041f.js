(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"3PoV":function(l,n,t){"use strict";t.r(n);var e=t("CcnG"),u=t("mrSG"),r=t("y24p"),o=t("a3Cf"),i=function(l){function n(){var n=null!==l&&l.apply(this,arguments)||this;return n.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},n.EncodingType={JPEG:0,PNG:1},n.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},n.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},n.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},n.Direction={BACK:0,FRONT:1},n}return Object(u.__extends)(n,l),n.prototype.getPicture=function(l){return Object(o.cordova)(this,"getPicture",{callbackOrder:"reverse"},arguments)},n.prototype.cleanup=function(){return Object(o.cordova)(this,"cleanup",{platforms:["iOS"]},arguments)},n.pluginName="Camera",n.plugin="cordova-plugin-camera",n.pluginRef="navigator.camera",n.repo="https://github.com/apache/cordova-plugin-camera",n.platforms=["Android","Browser","iOS","Windows"],n}(o.IonicNativePlugin),a=t("gRf5"),c=t("AytR"),s=t("J563"),p=t("ZZ/e"),h=c.a.API_URL+"/useravatar",b=function(){function l(l,n,t,e,u,r,o,i){this.router=l,this.authService=n,this.crop=t,this.camera=e,this.transfer=u,this.actionSheetController=r,this.loadingController=o,this.toastController=i,this.fileUrl=null,this.image="",this.imageData="",this.saving=!1}return l.prototype.ngOnInit=function(){this.authUser=this.authService.getLoggedUser(),this.authUser.avatar&&(this.authUser.avatar=c.a.BASE_URL+"/avatars/"+this.authUser.avatar)},l.prototype.ionViewWillEnter=function(){this.authUser=this.authService.getLoggedUser(),this.authUser.avatar&&(this.authUser.avatar=c.a.BASE_URL+"/avatars/"+this.authUser.avatar)},l.prototype.pop=function(){this.router.navigateByUrl("coaching-paths")},l.prototype.logout=function(){this.authService.logout(),this.router.navigateByUrl("login")},l.prototype.presentActionSheet=function(){return u.__awaiter(this,void 0,void 0,function(){var l=this;return u.__generator(this,function(n){switch(n.label){case 0:return[4,this.actionSheetController.create({buttons:[{text:"Camera",icon:"camera",handler:function(){l.openCam()}},{text:"Gallery",icon:"images",handler:function(){l.gallery()}},{text:"Cancel",icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})},l.prototype.openCam=function(){var l=this;this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,sourceType:this.camera.PictureSourceType.CAMERA}).then(function(n){l.crop.crop(n,{quality:100}).then(function(n){l.fileUrl=window.Ionic.WebView.convertFileSrc(n),l.imageData=n,l.image=n},function(l){return console.error("Error cropping image",l)})},function(l){alert("error "+JSON.stringify(l))})},l.prototype.upload=function(){return u.__awaiter(this,void 0,void 0,function(){var l,n,t=this;return u.__generator(this,function(e){return this.saving=!0,console.log("new image path is: "+this.image),l=this.transfer.create(),n={fileKey:"avatar",fileName:"avatar.jpeg",params:{userId:this.authUser.id},headers:{Authorization:localStorage.getItem("token")}},l.upload(this.image,h,n).then(function(l){return u.__awaiter(t,void 0,void 0,function(){return u.__generator(this,function(n){switch(n.label){case 0:return console.log(l),this.saving=!1,this.authUser.avatar=this.fileUrl,[4,this.toastController.create({message:"Immagine salvata con successo.",duration:1500})];case 1:return n.sent().present(),[2]}})})},function(l){t.saving=!1,console.log(l)}),[2]})})},l.prototype.gallery=function(){var l=this;this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY}).then(function(n){l.crop.crop(n,{quality:100}).then(function(n){l.fileUrl=window.Ionic.WebView.convertFileSrc(n),l.imageData=n,l.image=n},function(l){return console.error("Error cropping image",l)})},function(l){alert("error "+JSON.stringify(l))})},l}(),f=function(){return function(){}}(),g=t("pMnS"),m=t("oBZk"),v=t("Ip0R"),d=t("ZYCi"),y=e.ob({encapsulation:0,styles:[[".user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;-o-object-fit:cover;object-fit:cover;background-position:center;background-repeat:no-repeat;background-size:cover}"]],data:{}});function U(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,1,"ion-icon",[["name","person"]],null,null,null,m.G,m.l)),e.pb(1,49152,null,0,p.B,[e.h,e.k,e.z],{name:[0,"name"]},null)],function(l,n){l(n,1,0,"person")},null)}function I(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){var t=n.component;l(n,0,0,e.sb(1,"",t.fileUrl?t.fileUrl:t.authUser.avatar,""))})}function R(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Salva"]))],null,null)}function q(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,4,"div",[["class","flex-cont-row v-center"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,[" Salvataggio in corso..."])),(l()(),e.qb(3,0,null,null,1,"ion-spinner",[["class","mx-3"]],null,null,null,m.M,m.r)),e.pb(4,49152,null,0,p.qb,[e.h,e.k,e.z],null,null)],null,null)}function O(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,13,"ion-header",[["no-border",""]],null,null,null,m.F,m.k)),e.pb(1,49152,null,0,p.A,[e.h,e.k,e.z],null,null),(l()(),e.qb(2,0,null,0,11,"ion-toolbar",[["class","elan-toolbar"]],null,null,null,m.P,m.u)),e.pb(3,49152,null,0,p.Ab,[e.h,e.k,e.z],null,null),(l()(),e.qb(4,0,null,0,6,"ion-buttons",[["slot","primary"]],null,null,null,m.y,m.d)),e.pb(5,49152,null,0,p.k,[e.h,e.k,e.z],null,null),(l()(),e.qb(6,0,null,0,4,"ion-button",[],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.pop()&&e),e},m.x,m.c)),e.pb(7,49152,null,0,p.j,[e.h,e.k,e.z],null,null),(l()(),e.qb(8,0,null,0,1,"ion-icon",[["name","close"],["slot","start"]],null,null,null,m.G,m.l)),e.pb(9,49152,null,0,p.B,[e.h,e.k,e.z],{name:[0,"name"]},null),(l()(),e.Ib(-1,0,[" Chiudi "])),(l()(),e.qb(11,0,null,0,2,"ion-title",[],null,null,null,m.O,m.t)),e.pb(12,49152,null,0,p.yb,[e.h,e.k,e.z],null,null),(l()(),e.Ib(-1,0,["Profilo Utente"])),(l()(),e.qb(14,0,null,null,26,"ion-content",[],null,null,null,m.E,m.j)),e.pb(15,49152,null,0,p.t,[e.h,e.k,e.z],null,null),(l()(),e.qb(16,0,null,0,24,"div",[["class","p-5 h-100 w-100 flex-cont-col"]],null,null,null,null,null)),(l()(),e.qb(17,0,null,null,13,"div",[["class","flex-1 h-center flex-cont-col scroll"]],null,null,null,null,null)),(l()(),e.qb(18,0,null,null,5,"div",[["class","user-avatar mt-5"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.presentActionSheet()&&e),e},null,null)),(l()(),e.qb(19,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,U)),e.pb(21,16384,null,0,v.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,I)),e.pb(23,16384,null,0,v.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(24,0,null,null,1,"div",[["class","user-name mt-5 tx-bold tx-primary"]],null,null,null,null,null)),(l()(),e.Ib(25,null,[" "," "," "])),(l()(),e.qb(26,0,null,null,1,"div",[["class","mt-4"]],null,null,null,null,null)),(l()(),e.Ib(27,null,[" "," "])),(l()(),e.qb(28,0,null,null,2,"div",[["class","user-role mt-4"]],null,null,null,null,null)),(l()(),e.qb(29,0,null,null,1,"div",[["class","tx-bold"]],[[4,"color",null]],null,null,null,null)),(l()(),e.Ib(30,null,[" "," "])),(l()(),e.qb(31,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),e.qb(32,0,null,null,5,"ion-button",[["class","my-2"],["color","secondary"],["fill","solid"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.upload()&&e),e},m.x,m.c)),e.pb(33,49152,null,0,p.j,[e.h,e.k,e.z],{color:[0,"color"],fill:[1,"fill"]},null),(l()(),e.hb(16777216,null,0,1,null,R)),e.pb(35,16384,null,0,v.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,0,1,null,q)),e.pb(37,16384,null,0,v.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(38,0,null,null,2,"ion-button",[["class","choose-coach-button"],["color","primary"],["fill","solid"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.logout()&&e),e},m.x,m.c)),e.pb(39,49152,null,0,p.j,[e.h,e.k,e.z],{color:[0,"color"],fill:[1,"fill"]},null),(l()(),e.Ib(-1,0,[" Logout "]))],function(l,n){var t=n.component;l(n,9,0,"close"),l(n,21,0,!t.fileUrl&&!t.authUser.avatar),l(n,23,0,t.fileUrl||t.authUser.avatar),l(n,33,0,"secondary","solid"),l(n,35,0,!t.saving),l(n,37,0,t.saving),l(n,39,0,"primary","solid")},function(l,n){var t=n.component;l(n,25,0,t.authUser.name,t.authUser.surname),l(n,27,0,t.authUser.email),l(n,29,0,t.authUser.role.color),l(n,30,0,t.authUser.role.name)})}function k(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,1,"app-userprofile",[],null,null,null,O,y)),e.pb(1,114688,null,0,b,[d.m,s.a,r.a,i,a.a,p.a,p.Eb,p.Lb],null,null)],function(l,n){l(n,1,0)},null)}var A=e.mb("app-userprofile",b,k,{},{},[]),T=t("gIcY");t.d(n,"UserprofilePageModuleNgFactory",function(){return _});var _=e.nb(f,[],function(l){return e.xb([e.yb(512,e.j,e.bb,[[8,[g.a,A]],[3,e.j],e.x]),e.yb(4608,v.n,v.m,[e.u,[2,v.C]]),e.yb(4608,T.n,T.n,[]),e.yb(4608,p.b,p.b,[e.z,e.g]),e.yb(4608,p.Fb,p.Fb,[p.b,e.j,e.q]),e.yb(4608,p.Ib,p.Ib,[p.b,e.j,e.q]),e.yb(4608,p.a,p.a,[]),e.yb(4608,i,i,[]),e.yb(1073742336,v.b,v.b,[]),e.yb(1073742336,T.l,T.l,[]),e.yb(1073742336,T.c,T.c,[]),e.yb(1073742336,p.Cb,p.Cb,[]),e.yb(1073742336,d.o,d.o,[[2,d.u],[2,d.m]]),e.yb(1073742336,f,f,[]),e.yb(1024,d.k,function(){return[[{path:"",component:b}]]},[])])})}}]);