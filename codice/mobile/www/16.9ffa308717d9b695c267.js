(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Aso2:function(n,l,e){"use strict";e.d(l,"a",function(){return b});var t=e("t/Na"),o=e("J563"),u=e("GxC+"),r=e("AytR"),a=e("CcnG"),c=e("ZYCi"),i=r.a.API_URL+"/resource",s=i+"/act",d={1:8,2:10,3:14,4:16};function h(n){var l=new Date(n.date),e=l.getTime();e+=60*d[n.hour]*60*1e3;var t=-1*l.getTimezoneOffset()*6e4;return new Date(e+t)}var b=function(){function n(n,l,e,t){this.http=n,this.authService=l,this.surveyService=e,this.router=t,this.userPlans=null,this.creatingNewPath=!1,this.newPath={coach:{},dates:[],survey:{}}}return n.prototype.getCoachingPaths=function(){var n=this;return new Promise(function(l,e){var o={user_id:n.authService.getLoggedUser().id},u=(new t.g).set("filter",JSON.stringify(o));n.http.get(i+"/coachingplans",{params:u}).subscribe(function(e){n.userPlans=e.resources.resources,l(n.userPlans)},function(n){e(n)})})},n.prototype.getPlanDetails=function(n){var l=this;return new Promise(function(e,t){l.http.get(i+"/coachingplans/"+n).subscribe(function(n){e(n.resource)},function(n){l.router.navigate(["/coaching-paths",{}]),t(n)})})},n.prototype.getCreatingNewPath=function(){return this.creatingNewPath},n.prototype.getNewPath=function(){return this.newPath},n.prototype.getCurrentCoach=function(){return this.newPath.coach},n.prototype.saveNewPath=function(){var n=this;return new Promise(function(l,e){var t=n.authService.getLoggedUser(),o=n.surveyService.getSurvey(),u={coach:{id:n.newPath.coach.id},user:{id:t.id},survey:{id:o.id},sessions:[{proposed_date_1:h(n.newPath.dates[0]),proposed_date_2:h(n.newPath.dates[1]),proposed_date_3:h(n.newPath.dates[2])}]};n.http.post(i+"/coachingplans",{resource:u}).subscribe(function(n){l(n)},function(n){e(n)})})},n.prototype.createNewSession=function(n){var l=this;return void 0===n&&(n=!0),new Promise(function(e,t){var o={proposed_date_1:h(l.newPath.dates[0]),proposed_date_2:h(l.newPath.dates[1]),proposed_date_3:h(l.newPath.dates[2])};n||(o.id=l.sessionId),l.planId&&(o.coaching_plan={id:l.planId}),l.http.post(i+"/sessions",{resource:o}).subscribe(function(n){e(l.planId)},function(n){e(n)})})},n.prototype.savePlanSessions=function(){return this.sessionId?this.createNewSession(!1):this.creatingNewPath?this.saveNewPath():this.createNewSession()},n.prototype.closePlan=function(n){var l=this;return new Promise(function(e,t){l.http.post(s+"/coachingplans/"+n.id+"/close_coaching_plan",{}).subscribe(function(n){e(n)},function(n){t(n)})})},n.prototype.setPlanId=function(n){this.planId=n},n.prototype.setSessionId=function(n){this.sessionId=n},n.prototype.setNewPath=function(n){this.newPath=JSON.parse(JSON.stringify(n))},n.prototype.setCoach=function(n){this.newPath.coach=JSON.parse(JSON.stringify(n))},n.prototype.setDates=function(n){this.newPath.dates=JSON.parse(JSON.stringify(n))},n.prototype.setCreatingNewPath=function(n){this.creatingNewPath=n},n.prototype.saveTeachingAgreement=function(n,l){var e=this;return new Promise(function(t,o){var u=l;u.id=n,e.http.post(i+"/coachingplans",{resource:u}).subscribe(function(n){t("ok")},function(n){o(n)})})},n.ngInjectableDef=a.S({factory:function(){return new n(a.W(t.c),a.W(o.a),a.W(u.a),a.W(c.m))},token:n,providedIn:"root"}),n}()},"GxC+":function(n,l,e){"use strict";e.d(l,"a",function(){return a});var t=e("t/Na"),o=e("AytR"),u=e("CcnG"),r=o.a.API_URL+"/resource",a=function(){function n(n){this.http=n,this.answers=[]}return n.prototype.save=function(n){var l=this;return new Promise(function(e,t){l.http.post(r+"/surveys",{resource:{answers:n}}).subscribe(function(n){l.surveyResult=n.resource,e("ok")},function(n){t(n.statusText)})})},n.prototype.getSurvey=function(){return this.surveyResult},n.prototype.getQuestions=function(){var n=this;return new Promise(function(l,e){var o=(new t.g).set("filter",JSON.stringify({visible:1}));n.http.get(r+"/questions",{params:o}).subscribe(function(n){l(n.resources.resources)},function(n){e(n.statusText)})})},n.prototype.getAnswers=function(){return this.answers},n.ngInjectableDef=u.S({factory:function(){return new n(u.W(t.c))},token:n,providedIn:"root"}),n}()},MKrp:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=e("3Fsn"),u=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],r=function(){function n(n,l,e,t){this.location=n,this.router=l,this.route=e,this.chooseDateSessionService=t,this.today=new Date,this.show_hours=!0}return n.prototype.ngOnInit=function(){this.isLoading=!0,this.showHours(),this.route.snapshot.queryParams&&this.route.snapshot.queryParams.date?(this.date={date:new Date(parseInt(this.route.snapshot.queryParams.date)),hour:this.route.snapshot.queryParams.hour},this.chooseDateSessionService.setSelectedDate(this.date)):this.date={date:new Date},this.dateChooserOnly=!!this.route.snapshot.queryParams.date_chooser_only,this.updateCalendar()},n.prototype.showHours=function(){var n=this;this.route.queryParams.subscribe(function(l){l.show_hours&&(n.show_hours="false"!=l.show_hours)})},n.prototype.updateCalendar=function(){var n=this;this.isLoading=!0,this.year=this.date.date.getYear()+1900,this.month=this.date.date.getMonth(),this.monthName=u[this.month],this.chooseDateSessionService.getCalendarArray(this.month,this.year,this.dateChooserOnly).then(function(l){n.dateSelected=n.chooseDateSessionService.getSelectedDate(),n.weeks=l},function(n){console.log(n)}).finally(function(){n.isLoading=!1})},n.prototype.saveDate=function(){this.chooseDateSessionService.setDate(this.dateSelected),this.location.back()},n.prototype.selectHour=function(n){this.dateSelected.hours[n].available&&(this.dateSelected.hour=n)},n.prototype.selectDate=function(n){n.hasAvailable&&(this.show_hours||(this.dateSelected.hour=1),this.dateSelected.hour=this.dateChooserOnly?1:-1,this.dateSelected.date=n.timestamp,this.dateSelected.hours=n.hours)},n.prototype.nextMonth=function(){this.date.date.setMonth(this.date.date.getMonth()+1),this.updateCalendar()},n.prototype.prevMonth=function(){this.today.getMonth()<this.date.date.getMonth()&&(this.date.date.setMonth(this.date.date.getMonth()-1),this.updateCalendar())},n}(),a=function(){return function(){}}(),c=e("Qm6G"),i=e("pMnS"),s=e("Ip0R"),d=e("oBZk"),h=e("ZZ/e"),b=e("ZYCi"),p=t.ob({encapsulation:0,styles:[[".cal-month-view[_ngcontent-%COMP%]   .cal-cell-top[_ngcontent-%COMP%]{flex:1}.caledar-day[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.caledar-day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#333;box-sizing:content-box;height:0;border-radius:100%;width:80%;padding-bottom:80%;position:relative;transition:background-color .3s ease}.caledar-day.disabled[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:var(--ion-color-light-grey)}.caledar-day.legend[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:var(--ion-color-secondary);border-color:var(--ion-color-secondary);color:#fff;font-family:ElanFont2Bold}.caledar-day.free[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border:2px solid;color:var(--ion-color-primary);border-color:var(--ion-color-primary);background-color:#fff}.caledar-day.selected[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border:2px solid;background-color:var(--ion-color-primary);border-color:var(--ion-color-primary);color:#fff}.caledar-day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.hour-picker[_ngcontent-%COMP%]   .hour-cont[_ngcontent-%COMP%]{border-radius:10px;border:2px solid;background-color:var(--ion-color-rose);border-color:var(--ion-color-rose);color:#fff;transition:background-color .3s ease}.hour-picker[_ngcontent-%COMP%]   .hour-cont.free[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);color:var(--ion-color-primary);background-color:#fff}.hour-picker[_ngcontent-%COMP%]   .hour-cont.selected[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);background-color:var(--ion-color-primary);color:#fff}"]],data:{}});function f(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,3,"div",[["class","caledar-day"]],[[2,"disabled",null],[2,"free",null],[2,"legend",null],[2,"selected",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectDate(n.context.$implicit)&&t),t},null,null)),(n()(),t.qb(1,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t.qb(2,0,null,null,1,"span",[["class","flex-cont-col v-center h-center"]],null,null,null,null,null)),(n()(),t.Ib(3,null,[" "," "]))],null,function(n,l){n(l,0,0,l.context.$implicit.disabled,l.context.$implicit.hasAvailable,l.context.$implicit.legend,l.context.$implicit.timestamp==l.component.dateSelected.date&&-1!=l.context.$implicit.timestamp),n(l,3,0,-1!=l.context.$implicit.value?l.context.$implicit.value:"")})}function g(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,2,"div",[["class","calendar-week flex-cont-row flex-1"]],null,null,null,null,null)),(n()(),t.hb(16777216,null,null,1,null,f)),t.pb(2,278528,null,0,s.k,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.context.$implicit)},null)}function v(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,3,"div",[["class","tx-grey flex-1 flex-cont-col v-center h-center"]],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,1,"ion-icon",[["class","mb-3"],["name","calendar"],["size","large"]],null,null,null,d.G,d.l)),t.pb(2,49152,null,0,h.B,[t.h,t.k,t.z],{name:[0,"name"],size:[1,"size"]},null),(n()(),t.Ib(-1,null,[" Seleziona una data "]))],function(n,l){n(l,2,0,"calendar","large")},null)}function y(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,10,"div",[["class","flex-1 flex-cont-col"]],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,4,"div",[["class","flex-1 flex-cont-row mb-4"]],null,null,null,null,null)),(n()(),t.qb(2,0,null,null,1,"div",[["class","flex-1 flex-cont-row v-center h-center mr-4 hour-cont"]],[[2,"free",null],[2,"selected",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectHour(1)&&t),t},null,null)),(n()(),t.Ib(-1,null,[" 08:00 - 10:00 "])),(n()(),t.qb(4,0,null,null,1,"div",[["class","flex-1 flex-cont-row v-center h-center hour-cont"]],[[2,"free",null],[2,"selected",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectHour(2)&&t),t},null,null)),(n()(),t.Ib(-1,null,[" 10:00 - 12:00 "])),(n()(),t.qb(6,0,null,null,4,"div",[["class","flex-1 flex-cont-row"]],null,null,null,null,null)),(n()(),t.qb(7,0,null,null,1,"div",[["class","flex-1 flex-cont-row v-center h-center mr-4 hour-cont"]],[[2,"free",null],[2,"selected",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectHour(3)&&t),t},null,null)),(n()(),t.Ib(-1,null,[" 14:00 - 16:00 "])),(n()(),t.qb(9,0,null,null,1,"div",[["class","flex-1 flex-cont-row v-center h-center hour-cont"]],[[2,"free",null],[2,"selected",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectHour(4)&&t),t},null,null)),(n()(),t.Ib(-1,null,[" 16:00 - 18:00 "]))],null,function(n,l){var e=l.component;n(l,2,0,null==e.dateSelected.hours[1]?null:e.dateSelected.hours[1].available,1==e.dateSelected.hour),n(l,4,0,null==e.dateSelected.hours[2]?null:e.dateSelected.hours[2].available,2==e.dateSelected.hour),n(l,7,0,null==e.dateSelected.hours[3]?null:e.dateSelected.hours[3].available,3==e.dateSelected.hour),n(l,9,0,null==e.dateSelected.hours[4]?null:e.dateSelected.hours[4].available,4==e.dateSelected.hour)})}function m(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,4,"div",[["class","hour-picker flex-1 flex-cont-col my-3"]],null,null,null,null,null)),(n()(),t.hb(16777216,null,null,1,null,v)),t.pb(2,16384,null,0,s.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.hb(16777216,null,null,1,null,y)),t.pb(4,16384,null,0,s.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,-1==e.dateSelected.date),n(l,4,0,-1!=e.dateSelected.date)},null)}function w(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,19,"div",[["class","p-5 flex-cont-col h-100"]],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,12,"div",[["class","calendar-picker flex-cont-col flex-3"]],null,null,null,null,null)),(n()(),t.qb(2,0,null,null,8,"div",[["class","month-chooser flex-cont-row v-center mb-3"]],null,null,null,null,null)),(n()(),t.qb(3,0,null,null,2,"div",[["class","ball-icon tx-white bg-primary"]],[[2,"bg-primary",null],[2,"bg-light-grey",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.prevMonth()&&t),t},null,null)),(n()(),t.qb(4,0,null,null,1,"ion-icon",[["class","box-icon"],["name","arrow-dropleft"]],null,null,null,d.G,d.l)),t.pb(5,49152,null,0,h.B,[t.h,t.k,t.z],{name:[0,"name"]},null),(n()(),t.qb(6,0,null,null,1,"div",[["class","mx-auto tx-r15"]],null,null,null,null,null)),(n()(),t.Ib(7,null,[" "," "," "])),(n()(),t.qb(8,0,null,null,2,"div",[["class","ball-icon tx-white bg-primary"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.nextMonth()&&t),t},null,null)),(n()(),t.qb(9,0,null,null,1,"ion-icon",[["class","box-icon"],["name","arrow-dropright"]],null,null,null,d.G,d.l)),t.pb(10,49152,null,0,h.B,[t.h,t.k,t.z],{name:[0,"name"]},null),(n()(),t.qb(11,0,null,null,2,"div",[["class","calendar-array flex-cont-col flex-1"]],null,null,null,null,null)),(n()(),t.hb(16777216,null,null,1,null,g)),t.pb(13,278528,null,0,s.k,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(n()(),t.hb(16777216,null,null,1,null,m)),t.pb(15,16384,null,0,s.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.qb(16,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),t.qb(17,0,null,null,2,"ion-button",[["class","not-fixed"],["color","primary"],["fill","solid"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.saveDate()&&t),t},d.x,d.c)),t.pb(18,49152,null,0,h.j,[t.h,t.k,t.z],{color:[0,"color"],disabled:[1,"disabled"],fill:[2,"fill"]},null),(n()(),t.Ib(-1,0,[" Salva Data "]))],function(n,l){var e=l.component;n(l,5,0,"arrow-dropleft"),n(l,10,0,"arrow-dropright"),n(l,13,0,e.weeks),n(l,15,0,e.show_hours),n(l,18,0,"primary",-1==e.dateSelected.hour||-1==e.dateSelected.date,"solid")},function(n,l){var e=l.component;n(l,3,0,e.today.getMonth()<e.date.date.getMonth(),e.today.getMonth()>=e.date.date.getMonth()),n(l,7,0,e.monthName,e.year)})}function P(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,5,"div",[["class","flex-cont-col v-center h-center h-100"]],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,4,"div",[["class","flex-cont-col v-center h-center"]],null,null,null,null,null)),(n()(),t.qb(2,0,null,null,1,"ion-spinner",[],null,null,null,d.M,d.r)),t.pb(3,49152,null,0,h.qb,[t.h,t.k,t.z],null,null),(n()(),t.qb(4,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t.Ib(-1,null,["Caricamento..."]))],null,null)}function x(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,11,"ion-header",[["no-border",""]],null,null,null,d.F,d.k)),t.pb(1,49152,null,0,h.A,[t.h,t.k,t.z],null,null),(n()(),t.qb(2,0,null,0,9,"ion-toolbar",[["class","elan-toolbar"]],null,null,null,d.P,d.u)),t.pb(3,49152,null,0,h.Ab,[t.h,t.k,t.z],null,null),(n()(),t.qb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,d.y,d.d)),t.pb(5,49152,null,0,h.k,[t.h,t.k,t.z],null,null),(n()(),t.qb(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(n,l,e){var o=!0;return"click"===l&&(o=!1!==t.Ab(n,8).onClick(e)&&o),o},d.w,d.b)),t.pb(7,49152,null,0,h.f,[t.h,t.k,t.z],null,null),t.pb(8,16384,null,0,h.g,[[2,h.gb],h.Gb],null,null),(n()(),t.qb(9,0,null,0,2,"ion-title",[],null,null,null,d.O,d.t)),t.pb(10,49152,null,0,h.yb,[t.h,t.k,t.z],null,null),(n()(),t.Ib(-1,0,["Fissa Data & Ora"])),(n()(),t.qb(12,0,null,null,5,"ion-content",[],null,null,null,d.E,d.j)),t.pb(13,49152,null,0,h.t,[t.h,t.k,t.z],null,null),(n()(),t.hb(16777216,null,0,1,null,w)),t.pb(15,16384,null,0,s.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.hb(16777216,null,0,1,null,P)),t.pb(17,16384,null,0,s.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,15,0,!e.isLoading),n(l,17,0,e.isLoading)},null)}function S(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,1,"app-calendar",[],null,null,null,x,p)),t.pb(1,114688,null,0,r,[s.h,b.m,b.a,o.a],null,null)],function(n,l){n(l,1,0)},null)}var k=t.mb("app-calendar",r,S,{},{},[]),C=e("gIcY"),O=e("SN/6"),_=e("YXNw"),q=e("lf6A");e.d(l,"CalendarPageModuleNgFactory",function(){return M});var M=t.nb(a,[],function(n){return t.xb([t.yb(512,t.j,t.bb,[[8,[c.a,i.a,k]],[3,t.j],t.x]),t.yb(4608,s.n,s.m,[t.u,[2,s.C]]),t.yb(4608,C.n,C.n,[]),t.yb(4608,h.b,h.b,[t.z,t.g]),t.yb(4608,h.Fb,h.Fb,[h.b,t.j,t.q]),t.yb(4608,h.Ib,h.Ib,[h.b,t.j,t.q]),t.yb(1073742336,s.b,s.b,[]),t.yb(1073742336,C.l,C.l,[]),t.yb(1073742336,C.c,C.c,[]),t.yb(1073742336,h.Cb,h.Cb,[]),t.yb(1073742336,O.a,O.a,[]),t.yb(1073742336,_.a,_.a,[]),t.yb(1073742336,O.g,O.g,[]),t.yb(1073742336,q.b,q.b,[]),t.yb(1073742336,O.j,O.j,[]),t.yb(1073742336,O.c,O.c,[]),t.yb(1073742336,O.f,O.f,[]),t.yb(1073742336,b.o,b.o,[[2,b.u],[2,b.m]]),t.yb(1073742336,a,a,[]),t.yb(1024,b.k,function(){return[[{path:"",component:r}]]},[])])})}}]);