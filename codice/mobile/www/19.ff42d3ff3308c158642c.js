(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"4o9a":function(t,n,e){"use strict";e.r(n);var r=e("CcnG"),o=e("Aso2"),s=function(){function t(t,n){this.router=t,this.profileService=n,this.profileService=n,this.router=t}return t.prototype.ngOnInit=function(){var t=this;this.loadingText=this.profileService.getCreatingNewPath()?"Creando nuovo piano...":"Creando nuova sessione...",this.profileService.savePlanSessions().then(function(n){t.profileService.getCreatingNewPath()?(t.profileService.setCreatingNewPath(!1),t.router.navigateByUrl("/coaching-paths")):t.router.navigateByUrl("/profile/"+n)})},t}(),i=function(){return function(){}}(),u=e("pMnS"),a=e("oBZk"),c=e("ZZ/e"),l=e("ZYCi"),p=r.ob({encapsulation:0,styles:[[""]],data:{}});function h(t){return r.Kb(0,[(t()(),r.qb(0,0,null,null,7,"ion-content",[["scroll-y","false"]],null,null,null,a.E,a.j)),r.pb(1,49152,null,0,c.t,[r.h,r.k,r.z],null,null),(t()(),r.qb(2,0,null,0,5,"div",[["class","p-5 flex-cont-col h-100 v-center flex-cont-col"]],null,null,null,null,null)),(t()(),r.qb(3,0,null,null,4,"div",[["class","v-center h-center flex-cont-col"]],null,null,null,null,null)),(t()(),r.qb(4,0,null,null,1,"ion-spinner",[],null,null,null,a.M,a.r)),r.pb(5,49152,null,0,c.qb,[r.h,r.k,r.z],null,null),(t()(),r.qb(6,0,null,null,1,"h3",[["class","tx-tertiary mt-3"]],null,null,null,null,null)),(t()(),r.Ib(7,null,[" "," "]))],null,function(t,n){t(n,7,0,n.component.loadingText)})}function f(t){return r.Kb(0,[(t()(),r.qb(0,0,null,null,1,"app-create-new-path",[],null,null,null,h,p)),r.pb(1,114688,null,0,s,[l.m,o.a],null,null)],function(t,n){t(n,1,0)},null)}var b=r.mb("app-create-new-path",s,f,{},{},[]),d=e("Ip0R"),g=e("gIcY");e.d(n,"CreateNewPathPageModuleNgFactory",function(){return v});var v=r.nb(i,[],function(t){return r.xb([r.yb(512,r.j,r.bb,[[8,[u.a,b]],[3,r.j],r.x]),r.yb(4608,d.n,d.m,[r.u,[2,d.C]]),r.yb(4608,g.n,g.n,[]),r.yb(4608,c.b,c.b,[r.z,r.g]),r.yb(4608,c.Fb,c.Fb,[c.b,r.j,r.q]),r.yb(4608,c.Ib,c.Ib,[c.b,r.j,r.q]),r.yb(1073742336,d.b,d.b,[]),r.yb(1073742336,g.l,g.l,[]),r.yb(1073742336,g.c,g.c,[]),r.yb(1073742336,c.Cb,c.Cb,[]),r.yb(1073742336,l.o,l.o,[[2,l.u],[2,l.m]]),r.yb(1073742336,i,i,[]),r.yb(1024,l.k,function(){return[[{path:"",component:s}]]},[])])})},Aso2:function(t,n,e){"use strict";e.d(n,"a",function(){return f});var r=e("t/Na"),o=e("J563"),s=e("GxC+"),i=e("AytR"),u=e("CcnG"),a=e("ZYCi"),c=i.a.API_URL+"/resource",l=c+"/act",p={1:8,2:10,3:14,4:16};function h(t){var n=new Date(t.date),e=n.getTime();e+=60*p[t.hour]*60*1e3;var r=-1*n.getTimezoneOffset()*6e4;return new Date(e+r)}var f=function(){function t(t,n,e,r){this.http=t,this.authService=n,this.surveyService=e,this.router=r,this.userPlans=null,this.creatingNewPath=!1,this.newPath={coach:{},dates:[],survey:{}}}return t.prototype.getCoachingPaths=function(){var t=this;return new Promise(function(n,e){var o={user_id:t.authService.getLoggedUser().id},s=(new r.g).set("filter",JSON.stringify(o));t.http.get(c+"/coachingplans",{params:s}).subscribe(function(e){t.userPlans=e.resources.resources,n(t.userPlans)},function(t){e(t)})})},t.prototype.getPlanDetails=function(t){var n=this;return new Promise(function(e,r){n.http.get(c+"/coachingplans/"+t).subscribe(function(t){e(t.resource)},function(t){n.router.navigate(["/coaching-paths",{}]),r(t)})})},t.prototype.getCreatingNewPath=function(){return this.creatingNewPath},t.prototype.getNewPath=function(){return this.newPath},t.prototype.getCurrentCoach=function(){return this.newPath.coach},t.prototype.saveNewPath=function(){var t=this;return new Promise(function(n,e){var r=t.authService.getLoggedUser(),o=t.surveyService.getSurvey(),s={coach:{id:t.newPath.coach.id},user:{id:r.id},survey:{id:o.id},sessions:[{proposed_date_1:h(t.newPath.dates[0]),proposed_date_2:h(t.newPath.dates[1]),proposed_date_3:h(t.newPath.dates[2])}]};t.http.post(c+"/coachingplans",{resource:s}).subscribe(function(t){n(t)},function(t){e(t)})})},t.prototype.createNewSession=function(t){var n=this;return void 0===t&&(t=!0),new Promise(function(e,r){var o={proposed_date_1:h(n.newPath.dates[0]),proposed_date_2:h(n.newPath.dates[1]),proposed_date_3:h(n.newPath.dates[2])};t||(o.id=n.sessionId),n.planId&&(o.coaching_plan={id:n.planId}),n.http.post(c+"/sessions",{resource:o}).subscribe(function(t){e(n.planId)},function(t){e(t)})})},t.prototype.savePlanSessions=function(){return this.sessionId?this.createNewSession(!1):this.creatingNewPath?this.saveNewPath():this.createNewSession()},t.prototype.closePlan=function(t){var n=this;return new Promise(function(e,r){n.http.post(l+"/coachingplans/"+t.id+"/close_coaching_plan",{}).subscribe(function(t){e(t)},function(t){r(t)})})},t.prototype.setPlanId=function(t){this.planId=t},t.prototype.setSessionId=function(t){this.sessionId=t},t.prototype.setNewPath=function(t){this.newPath=JSON.parse(JSON.stringify(t))},t.prototype.setCoach=function(t){this.newPath.coach=JSON.parse(JSON.stringify(t))},t.prototype.setDates=function(t){this.newPath.dates=JSON.parse(JSON.stringify(t))},t.prototype.setCreatingNewPath=function(t){this.creatingNewPath=t},t.prototype.saveTeachingAgreement=function(t,n){var e=this;return new Promise(function(r,o){var s=n;s.id=t,e.http.post(c+"/coachingplans",{resource:s}).subscribe(function(t){r("ok")},function(t){o(t)})})},t.ngInjectableDef=u.S({factory:function(){return new t(u.W(r.c),u.W(o.a),u.W(s.a),u.W(a.m))},token:t,providedIn:"root"}),t}()},"GxC+":function(t,n,e){"use strict";e.d(n,"a",function(){return u});var r=e("t/Na"),o=e("AytR"),s=e("CcnG"),i=o.a.API_URL+"/resource",u=function(){function t(t){this.http=t,this.answers=[]}return t.prototype.save=function(t){var n=this;return new Promise(function(e,r){n.http.post(i+"/surveys",{resource:{answers:t}}).subscribe(function(t){n.surveyResult=t.resource,e("ok")},function(t){r(t.statusText)})})},t.prototype.getSurvey=function(){return this.surveyResult},t.prototype.getQuestions=function(){var t=this;return new Promise(function(n,e){var o=(new r.g).set("filter",JSON.stringify({visible:1}));t.http.get(i+"/questions",{params:o}).subscribe(function(t){n(t.resources.resources)},function(t){e(t.statusText)})})},t.prototype.getAnswers=function(){return this.answers},t.ngInjectableDef=s.S({factory:function(){return new t(s.W(r.c))},token:t,providedIn:"root"}),t}()}}]);