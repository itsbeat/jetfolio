(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{Aso2:function(n,t,e){"use strict";e.d(t,"a",function(){return b});var l=e("t/Na"),o=e("J563"),s=e("GxC+"),u=e("AytR"),i=e("CcnG"),r=e("ZYCi"),a=u.a.API_URL+"/resource",c=a+"/act",h={1:8,2:10,3:14,4:16};function p(n){var t=new Date(n.date),e=t.getTime();e+=60*h[n.hour]*60*1e3;var l=-1*t.getTimezoneOffset()*6e4;return new Date(e+l)}var b=function(){function n(n,t,e,l){this.http=n,this.authService=t,this.surveyService=e,this.router=l,this.userPlans=null,this.creatingNewPath=!1,this.newPath={coach:{},dates:[],survey:{}}}return n.prototype.getCoachingPaths=function(){var n=this;return new Promise(function(t,e){var o={user_id:n.authService.getLoggedUser().id},s=(new l.g).set("filter",JSON.stringify(o));n.http.get(a+"/coachingplans",{params:s}).subscribe(function(e){n.userPlans=e.resources.resources,t(n.userPlans)},function(n){e(n)})})},n.prototype.getPlanDetails=function(n){var t=this;return new Promise(function(e,l){t.http.get(a+"/coachingplans/"+n).subscribe(function(n){e(n.resource)},function(n){t.router.navigate(["/coaching-paths",{}]),l(n)})})},n.prototype.getCreatingNewPath=function(){return this.creatingNewPath},n.prototype.getNewPath=function(){return this.newPath},n.prototype.getCurrentCoach=function(){return this.newPath.coach},n.prototype.saveNewPath=function(){var n=this;return new Promise(function(t,e){var l=n.authService.getLoggedUser(),o=n.surveyService.getSurvey(),s={coach:{id:n.newPath.coach.id},user:{id:l.id},survey:{id:o.id},sessions:[{proposed_date_1:p(n.newPath.dates[0]),proposed_date_2:p(n.newPath.dates[1]),proposed_date_3:p(n.newPath.dates[2])}]};n.http.post(a+"/coachingplans",{resource:s}).subscribe(function(n){t(n)},function(n){e(n)})})},n.prototype.createNewSession=function(n){var t=this;return void 0===n&&(n=!0),new Promise(function(e,l){var o={proposed_date_1:p(t.newPath.dates[0]),proposed_date_2:p(t.newPath.dates[1]),proposed_date_3:p(t.newPath.dates[2])};n||(o.id=t.sessionId),t.planId&&(o.coaching_plan={id:t.planId}),t.http.post(a+"/sessions",{resource:o}).subscribe(function(n){e(t.planId)},function(n){e(n)})})},n.prototype.savePlanSessions=function(){return this.sessionId?this.createNewSession(!1):this.creatingNewPath?this.saveNewPath():this.createNewSession()},n.prototype.closePlan=function(n){var t=this;return new Promise(function(e,l){t.http.post(c+"/coachingplans/"+n.id+"/close_coaching_plan",{}).subscribe(function(n){e(n)},function(n){l(n)})})},n.prototype.setPlanId=function(n){this.planId=n},n.prototype.setSessionId=function(n){this.sessionId=n},n.prototype.setNewPath=function(n){this.newPath=JSON.parse(JSON.stringify(n))},n.prototype.setCoach=function(n){this.newPath.coach=JSON.parse(JSON.stringify(n))},n.prototype.setDates=function(n){this.newPath.dates=JSON.parse(JSON.stringify(n))},n.prototype.setCreatingNewPath=function(n){this.creatingNewPath=n},n.prototype.saveTeachingAgreement=function(n,t){var e=this;return new Promise(function(l,o){var s=t;s.id=n,e.http.post(a+"/coachingplans",{resource:s}).subscribe(function(n){l("ok")},function(n){o(n)})})},n.ngInjectableDef=i.S({factory:function(){return new n(i.W(l.c),i.W(o.a),i.W(s.a),i.W(r.m))},token:n,providedIn:"root"}),n}()},"GxC+":function(n,t,e){"use strict";e.d(t,"a",function(){return i});var l=e("t/Na"),o=e("AytR"),s=e("CcnG"),u=o.a.API_URL+"/resource",i=function(){function n(n){this.http=n,this.answers=[]}return n.prototype.save=function(n){var t=this;return new Promise(function(e,l){t.http.post(u+"/surveys",{resource:{answers:n}}).subscribe(function(n){t.surveyResult=n.resource,e("ok")},function(n){l(n.statusText)})})},n.prototype.getSurvey=function(){return this.surveyResult},n.prototype.getQuestions=function(){var n=this;return new Promise(function(t,e){var o=(new l.g).set("filter",JSON.stringify({visible:1}));n.http.get(u+"/questions",{params:o}).subscribe(function(n){t(n.resources.resources)},function(n){e(n.statusText)})})},n.prototype.getAnswers=function(){return this.answers},n.ngInjectableDef=s.S({factory:function(){return new n(s.W(l.c))},token:n,providedIn:"root"}),n}()},jTEj:function(n,t,e){"use strict";e.r(t);var l=e("CcnG"),o=e("3Fsn"),s=e("Aso2"),u=function(){function n(n,t,e,l,o){this.location=n,this.router=t,this.route=e,this.dateSessionChooseService=l,this.profileService=o,this.dates=[],this.choosenDates=0,this.isCreatingNewPath=!1,this.hourSlots={1:"08:00 - 10:00",2:"10:00 - 12:00",3:"14:00 - 16:00",4:"16:00 - 18:00"}}return n.prototype.ngOnInit=function(){if(console.log("on init"),this.planId=this.route.snapshot.queryParamMap.get("coach_path_id"),this.profileService.setPlanId(this.planId),this.dates=this.dateSessionChooseService.getDateSession(this.planId),this.route.snapshot.paramMap.get("session_id")){var n=this.route.snapshot.paramMap.get("session_id"),t=this.route.snapshot.paramMap.get("plan_id");this.profileService.setSessionId(n),this.profileService.setPlanId(t)}else this.isCreatingNewPath=this.profileService.getCreatingNewPath();this.dateSessionChooseService.resetChosenDates()},n.prototype.addDate=function(n){this.dateSessionChooseService.setIndex(n);var t={};-1!=this.dates[n].date&&(t={date:this.dates[n].date,hour:this.dates[n].hour}),this.router.navigate(["/calendar"],{queryParams:t})},n.prototype.saveRequest=function(){this.profileService.setDates(this.dates),this.router.navigateByUrl("/save-plan-sessions")},n.prototype.ionViewWillEnter=function(){var n=this.dateSessionChooseService.getSelectedDateAndIndex();console.log(n.index),console.log(n.date),n.index>-1&&null!=n.date&&(this.dates[n.index]=n.date,this.choosenDates++)},n}(),i=function(){return function(){}}(),r=e("pMnS"),a=e("oBZk"),c=e("ZZ/e"),h=e("Ip0R"),p=e("ZYCi"),b=l.ob({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]],data:{}});function d(n){return l.Kb(0,[(n()(),l.qb(0,0,null,null,5,"div",[["class","flex-cont-row h-center v-center box to-choose"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.addDate(n.parent.context.index)&&l),l},null,null)),(n()(),l.qb(1,0,null,null,2,"span",[["class","box-icon-bg"]],null,null,null,null,null)),(n()(),l.qb(2,0,null,null,1,"ion-icon",[["class","box-icon"],["name","add"]],null,null,null,a.G,a.l)),l.pb(3,49152,null,0,c.B,[l.h,l.k,l.z],{name:[0,"name"]},null),(n()(),l.qb(4,0,null,null,1,"p",[["class","m-0"]],null,null,null,null,null)),(n()(),l.Ib(5,null,[" Aggiungi Data "," "]))],function(n,t){n(t,3,0,"add")},function(n,t){n(t,5,0,t.parent.context.index+1)})}function f(n){return l.Kb(0,[(n()(),l.qb(0,0,null,null,9,"div",[["class","flex-cont-row h-center box selected ok"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.addDate(n.parent.context.index)&&l),l},null,null)),(n()(),l.qb(1,0,null,null,2,"span",[["class","box-icon-bg"]],null,null,null,null,null)),(n()(),l.qb(2,0,null,null,1,"ion-icon",[["class","box-icon"],["name","checkmark"]],null,null,null,a.G,a.l)),l.pb(3,49152,null,0,c.B,[l.h,l.k,l.z],{name:[0,"name"]},null),(n()(),l.qb(4,0,null,null,5,"div",[["class","flex-cont-col v-center"]],null,null,null,null,null)),(n()(),l.qb(5,0,null,null,2,"p",[["class","m-0"]],null,null,null,null,null)),(n()(),l.Ib(6,null,["",""])),l.Eb(7,2),(n()(),l.qb(8,0,null,null,1,"p",[["class","m-0"]],null,null,null,null,null)),(n()(),l.Ib(9,null,["",""]))],function(n,t){n(t,3,0,"checkmark")},function(n,t){var e=t.component,o=l.Jb(t,6,0,n(t,7,0,l.Ab(t.parent.parent,0),t.parent.context.$implicit.date,"dd/MM/yyyy"));n(t,6,0,o),n(t,9,0,e.hourSlots[t.parent.context.$implicit.hour])})}function g(n){return l.Kb(0,[(n()(),l.qb(0,0,null,null,3,"div",[["class","mb-4"]],null,null,null,null,null)),(n()(),l.hb(16777216,null,null,1,null,d)),l.pb(2,16384,null,0,h.l,[l.O,l.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),l.hb(0,[["dateIsValid",2]],null,0,null,f))],function(n,t){n(t,2,0,-1==t.context.$implicit.date,l.Ab(t,3))},null)}function v(n){return l.Kb(0,[l.Cb(0,h.d,[l.u]),(n()(),l.qb(1,0,null,null,11,"ion-header",[["no-border",""]],null,null,null,a.F,a.k)),l.pb(2,49152,null,0,c.A,[l.h,l.k,l.z],null,null),(n()(),l.qb(3,0,null,0,9,"ion-toolbar",[["class","elan-toolbar"]],null,null,null,a.P,a.u)),l.pb(4,49152,null,0,c.Ab,[l.h,l.k,l.z],null,null),(n()(),l.qb(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,a.y,a.d)),l.pb(6,49152,null,0,c.k,[l.h,l.k,l.z],null,null),(n()(),l.qb(7,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(n,t,e){var o=!0;return"click"===t&&(o=!1!==l.Ab(n,9).onClick(e)&&o),o},a.w,a.b)),l.pb(8,49152,null,0,c.f,[l.h,l.k,l.z],null,null),l.pb(9,16384,null,0,c.g,[[2,c.gb],c.Gb],null,null),(n()(),l.qb(10,0,null,0,2,"ion-title",[["class","tx-bold"]],null,null,null,a.O,a.t)),l.pb(11,49152,null,0,c.yb,[l.h,l.k,l.z],null,null),(n()(),l.Ib(-1,0,["Sessioni"])),(n()(),l.qb(13,0,null,null,11,"ion-content",[["scroll-y","false"]],null,null,null,a.E,a.j)),l.pb(14,49152,null,0,c.t,[l.h,l.k,l.z],null,null),(n()(),l.qb(15,0,null,0,9,"div",[["class","p-5 flex-cont-col h-100"]],null,null,null,null,null)),(n()(),l.qb(16,0,null,null,1,"h3",[["class","tx-tertiary mb-5"]],null,null,null,null,null)),(n()(),l.Ib(-1,null,[" Scegli date per la sessione "])),(n()(),l.qb(18,0,null,null,2,"div",[["class","flex-1 flex-cont-col w-100 scroll v-center"]],null,null,null,null,null)),(n()(),l.hb(16777216,null,null,1,null,g)),l.pb(20,278528,null,0,h.k,[l.O,l.L,l.s],{ngForOf:[0,"ngForOf"]},null),(n()(),l.qb(21,0,null,null,3,"div",[["class","pt-5 w-100 flex-cont-col v-center h-center"]],null,null,null,null,null)),(n()(),l.qb(22,0,null,null,2,"ion-button",[["class","choose-coach-button"],["color","primary"],["fill","solid"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.saveRequest()&&l),l},a.x,a.c)),l.pb(23,49152,null,0,c.j,[l.h,l.k,l.z],{color:[0,"color"],disabled:[1,"disabled"],fill:[2,"fill"]},null),(n()(),l.Ib(-1,0,[" Salva Richiesta "]))],function(n,t){var e=t.component;n(t,20,0,e.dates),n(t,23,0,"primary",e.choosenDates<e.dates.length||!1,"solid")},null)}function y(n){return l.Kb(0,[(n()(),l.qb(0,0,null,null,1,"app-date-session-chooser",[],null,null,null,v,b)),l.pb(1,114688,null,0,u,[h.h,p.m,p.a,o.a,s.a],null,null)],function(n,t){n(t,1,0)},null)}var w=l.mb("app-date-session-chooser",u,y,{},{},[]),P=e("gIcY"),m=e("iTUp");e.d(t,"DateSessionChooserPageModuleNgFactory",function(){return S});var S=l.nb(i,[],function(n){return l.xb([l.yb(512,l.j,l.bb,[[8,[r.a,w]],[3,l.j],l.x]),l.yb(4608,h.n,h.m,[l.u,[2,h.C]]),l.yb(4608,P.n,P.n,[]),l.yb(4608,c.b,c.b,[l.z,l.g]),l.yb(4608,c.Fb,c.Fb,[c.b,l.j,l.q]),l.yb(4608,c.Ib,c.Ib,[c.b,l.j,l.q]),l.yb(1073742336,h.b,h.b,[]),l.yb(1073742336,P.l,P.l,[]),l.yb(1073742336,P.c,P.c,[]),l.yb(1073742336,c.Cb,c.Cb,[]),l.yb(1073742336,p.o,p.o,[[2,p.u],[2,p.m]]),l.yb(1073742336,m.a,m.a,[]),l.yb(1073742336,i,i,[]),l.yb(1024,p.k,function(){return[[{path:"",component:u}]]},[])])})}}]);